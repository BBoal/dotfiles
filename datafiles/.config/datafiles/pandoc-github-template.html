<!DOCTYPE html>
<html>
  <title>Markdown preview</title>
  <style>
    $styles.html()$
  </style>
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/github-markdown-css/3.0.1/github-markdown.min.css"
  />
  <body>
    <article
      class="markdown-body"
      style="
        box-sizing: border-box;
        min-width: 200px;
        max-width: 980px;
        margin: 0 auto;
        padding: 45px;
      "
    >
      $body$
    </article>
    <script>
      let content = null;
      fetch(window.location)
        .then((d) => d.text())
        .then((con) => {
          content = con;
        });
      setInterval(() => {
        fetch(window.location)
          .then((d) => d.text())
          .then((con) => {
            if (content !== con) {
              content = con;
              document.getElementsByTagName("html")[0].innerHTML = con;
            }
          });
      }, 1000);
    </script>
  </body>
</html>
