#!/bin/sh

set -e

if command -v watchexec; then
    watchexec -c --force-poll 500 -w "$HOME/.local/share/task" "task limit:100 $* 2>/dev/null|tail -n+4|sed '$ d'|head -n$(($(tput lines) - 2))"
else
    watch -c -d -t "task limit:100 $* 2>/dev/null|tail -n+4|sed '$ d'"
fi
# while sleep 2; do
#     task limit:100 rc._forcecolor=on "$@" 2>/dev/null | tail -n+4 | sed '$ d' >/tmp/taskcontent
#     clear && head -n"$(($(tput lines) - 1))" /tmp/taskcontent
# done
