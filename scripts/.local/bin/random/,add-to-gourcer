#!/bin/sh

set -e

[ -z "$1" ] && URL="$(pbpaste)" || URL="$1"
echo "$URL" | grep -q '[#?]' && echo "Invalid git url. Url contains [#?]" && exit 1

cat $VIME_PATH/gourcer $GOURCER_PATH/pending |
	grep -q "$URL" && echo "[Already available] $URL" && exit 0
if echo "$URL" | grep -qE "^http"; then
	echo "- $URL" >>$VIME_PATH/gourcer
    echo "$URL added to grourcer list"
else
	echo "[Invalid url] $URL"
fi
# exit 1 will mess with newsboat
