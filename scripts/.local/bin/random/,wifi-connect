#!/bin/sh

set -e

notify 'Scanning for WiFi access points'
point="$(nmcli device wifi list | tail -n+2 | sed 's/^[^\*]/Available/;s/^\*/Connected/' |
	awk '{print $1,$3,$9}' | column -t | sort | ,picker -l 10 |
    awk '{print $2}')"
notify "Connecting to to $point"
nmcli connection up "$point" > /dev/null
notify "Connected to $point"
