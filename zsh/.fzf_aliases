#!/bin/zsh

alias cdf='cd $(ls -d */ | fzf --reverse --height "40%" --preview "ls {}")'

unalias z 2> /dev/null
z() {
    [ $# -gt 0 ] && _z "$*" && return
    cd "$(_z -l 2>&1 | cat | sed 's/^[^ ]*\ *//' | fzf --height 40% --reverse --inline-info +s --tac --query "$*" --preview "ls {}")" || exit
}

jj() {
    cd "./$(fd -H -td -d5 | fzf --preview 'tree -L 2 ./{}' )"
}

hc(){
    COMMAND=$(history | fzf | awk '{$1=$2=$3=""; print $0}')
    echo "$COMMAND" && echo "$COMMAND" | sed 's/^\ *//'| pbcopy
}

get_command(){
    history | uniq | awk '{$1=$2=$3=""; print $0}' | fzf --height 40%
}

wf(){
    if ! which workon >/dev/null; then
        source /usr/local/bin/virtualenvwrapper.sh
    fi
    workon "$(workon | fzf --height 20% --layout=reverse)"
}

alias h='$(get_command)'
